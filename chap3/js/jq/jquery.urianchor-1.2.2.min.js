!function(e){e.uriAnchor=function(){var e,n,t,r,o,i,a,c,h={regex_anchor_clean1:/^[#!]*/,regex_anchor_clean2:/\?[^?]*$/,settable_map_key:{schema_map:!0},schema_map:null};return e=function(e){var n=new Error;return n.name="Anchor Schema Reject",n.message=e,n},n=function(e){return void 0===e?"Undefined":null===e?"Null":{}.toString.call(e).slice(8,-1)},t=function(){return String(document.location.href.split("#")[1]||"").replace(h.regex_anchor_clean1,"").replace(h.regex_anchor_clean2,"")},r=function(e){var n,t,r,o=e.input_string||"",i=e.delimit_char||"&",a=e.delimit_kv_char||"=",c={};for(n=o.split(i),t=0;t<n.length;t++)r=n[t].split(a),1===r.length?c[decodeURIComponent(r[0])]=!0:2===r.length&&(c[decodeURIComponent(r[0])]=decodeURIComponent(r[1]));return c},o=function(t,r){var o,i,a,c,l,u,d,p,m,_,s,f,g=t||{},y=r||{},v=y.delimit_char||"&",k=y.delimit_kv_char||"=",w=y.sub_delimit_char||":",I=y.dep_delimit_char||"|",b=y.dep_kv_delimit_char||",",O=h.schema_map,R=[];if("Object"!==n(g))return!1;for(c in g)if(g.hasOwnProperty(c)){if(!c)continue;if(0===c.indexOf("_"))continue;if(O&&!O[c])throw e("Independent key |"+c+"| not authorized by anchor schema");if(d="",l=g[c],void 0===l&&(l=""),u=n(l),O&&(o=O[c],"Object"===n(o)&&!o[String(l)]))throw e("Independent key-value pair |"+c+"|"+String(l)+"| not authorized by anchor schema");if("Boolean"===u?l&&(d+=encodeURIComponent(c)):d+=encodeURIComponent(c)+k+encodeURIComponent(l),p="_"+c,g.hasOwnProperty(p)){if(m=g[p],f=[],O){if(i=O[p],!i)throw e("Dependent key |"+p+"| not authorized by anchor schema")}else i=null;for(_ in m)if(m.hasOwnProperty(_)){if(s=m[_],i&&(a=i[_],"Object"===n(a)&&!a[String(s)]))throw e("Dependent key-value pair |"+_+"|"+String(s)+"| not authorized by anchor schema");"Boolean"===u?s===!0&&f.push(encodeURIComponent(_)):f.push(encodeURIComponent(_)+b+encodeURIComponent(s))}f.length>0&&(d+=w+f.join(I))}R.push(d)}return R.join(v)},i=function(e,n,t){var r,i,a=o(e,n);return r=document.location.href.split("#",2),i=a?r[0]+"#!"+a:r[0],t?(document.location.replace(a?r[0]+"#!"+a:r[0]),!0):void(document.location.href=i)},a=function(){var e,o,i,a,c,h,l=t();if(""===l)return{};e=r({input_string:l,delimit_char:"&",delimit_kv_char:"="}),i=[];for(a in e)e.hasOwnProperty(a)&&i.push(a);for(o=0;o<i.length;o++)a=i[o],c=e[a],"String"===n(c)&&""!==a&&(e["_s_"+a]=c,h=c.split(":"),h[1]&&""!==h[1]&&(e[a]=h[0],e["_"+a]=r({input_string:h[1],delimit_char:"|",delimit_kv_char:","})));return e},c=function(e){var n,t,r=h.settable_map_key;for(n in e)if(e.hasOwnProperty(n)){if(!r.hasOwnProperty(n))throw t=new Error,t.name="Bad Input",t.message="Setting config key |"+n+"| is not supported",t;h[n]=e[n]}},{configModule:c,getVarType:n,makeAnchorMap:a,makeAnchorString:o,setAnchor:i}}()}(jQuery);
